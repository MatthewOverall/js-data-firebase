/**
* @author Jason Dobry <jason.dobry@gmail.com>
* @file js-data-firebase.min.js
* @version 0.1.0 - Homepage <http://wwwjs-data.io/js-data-firebase>
* @copyright (c) 2014 Jason Dobry
* @license MIT <https://github.com/js-data/js-data-firebase/blob/master/LICENSE>
*
* @overview My Adapter.
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.DSFirebaseAdapter=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){}function d(a,b){return new g(i(a,b))}function e(a){if(a=a||{},"string"!=typeof a.firebaseUrl)throw new Error("firebaseUrl is required!");this.defaults=new c,this.refs={},h(this.defaults,a)}var f,g;!window&&"undefined"!=typeof b&&b.exports?(f=a("js-data"),g=a("firebase")):(f=window.JSData,g=window.Firebase);var h=f.DSUtils.deepMixIn,i=f.DSUtils.makePath,j=f.DSUtils.Promise;e.prototype.getRef=function(a){return this.refs[a]||(this.refs[a]=d(this.defaults.firebaseUrl,a)),this.refs[a]},e.prototype.find=function(a,b){var c=this;return new j(function(d,e){var f=c.getRef(a.class);f.child(b).once("value",function(a){d(a.val())},e,c)})},e.prototype.findAll=function(){throw new Error("Not yet implemented!")},e.prototype.create=function(a,b){var c=this;return new j(function(d,e){var f=c.getRef(a.class),g=f.push(b,function(b){if(b)return e(b);var h=g.toString().replace(f.toString(),"");g.child(a.idAttribute).set(h,function(a){a?e(a):g.once("value",function(a){try{d(a.val())}catch(b){e(b)}},e,c)})})})},e.prototype.update=function(a,b,c){var d=this;return new j(function(e,f){var g=d.getRef(a.class),i=g.child(b);i.once("value",function(b){try{for(var d=b.val(),g=a.relationFields,j=[],k=0;g.length;k++)j.push(c[g[k]]),delete c[g[k]];for(h(d,c),k=0;g.length;k++)c[g[k]]=j.shift();i.set(d,function(a){a?f(a):e(d)})}catch(l){f(l)}},f,d)})},e.prototype.updateAll=function(){throw new Error("Not yet implemented!")},e.prototype.destroy=function(a,b){var c=this;return new j(function(d,e){var f=c.getRef(a.class);f.child(b).remove(function(a){a?e(a):d()})})},e.prototype.destroyAll=function(){throw new Error("Not yet implemented!")},b.exports=e},{firebase:"firebase","js-data":"js-data"}]},{},[1])(1)});